오늘 할 일
- [x] 게시판 ui개선
- [x] 게시판 상세조회
- [x] 게시판 상세조회 조회수증가

<hr>

게시판 추가 기능에 쓰일 문서&이미지 저장형식을 고민하다가 카페 게시판에서 많이 쓰이는 summernote를 써보려고 시도..

![[Pasted image 20240214163515.png]]
결론적으로는 포기했다.

내용입력은 DB에 무난히 잘 들어가는데 문제는 이미지 파일이 안들어가짐...




<hr>

```jsp
<!-- include libraries(jQuery, bootstrap) -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!-- include summernote css/js -->
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
<script src=" https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/lang/summernote-ko-KR.min.js"></script>
```
따로 파일을 다운받지 않고 쓰기 위한 설정

```jsp
<table>
	<form name="form" method="post" action="<%=request.getContextPath()%>/jointest.do">
		<tbody>
		<tr>
			<td><input type="text" name="title" placeholder="제목을 입력해주세요."></td>
		</tr>
		 <!-- Summernote의 내용을 담을 hidden textarea -->
        <tr>
            <td><textarea id="summernote" style="display:none;"></textarea></td>
        </tr>
        <!-- Summernote의 내용을 담을 hidden textarea -->
        <tr>
            <td><textarea id="hiddenContent" name="content" style="display:none;"></textarea></td>
        </tr>
		<tr><input type="submit"></tr>
		</tbody>
	</form>

</table>
```


```jsp
<script>
  $(document).ready(function() {
      $('#summernote').summernote({
    	    placeholder : '내용을 입력해주세요.',
    	    lang : 'ko-KR',              
			height: 300,                 
			minHeight: null,            
			maxHeight: null,            
			focus: true,
			callbacks: {
				onImageUpload : function(files){
					uploadImage(files[0],this);
				}
			},
			baseURL : "d:/d_other/uploadFiles"
      });
      
       $('form[name="form"]').submit(function(e) {
          var title = $('input[name="title"]').val();
          var content = $('#summernote').summernote('code');
       	  // Summernote의 내용을 textarea에 넣어줍니다.
          $('#hiddenContent').val(content);
       	  
      });
      
      //이미지 업로드 함수
       function uploadImage(file, editor) {
          var data = new FormData();
          data.append("file", file);
          $.ajax({
              data: data,
              type: "POST",
              url: `<%=request.getContextPath()%>/uploadImage.do`, 
              cache: false,
              contentType: false,
              processData: false,
              success: function(url) {
                  // 업로드된 이미지의 URL을 에디터에 삽입합니다.
                  $(editor).summernote('insertImage', url);
              },
              error: function(data) {
                  console.log("Error uploading image");
              }
          });
      }
      
  });
</script>
```

<hr>

결국 오늘 게시판 작성을 하지는 못했다.